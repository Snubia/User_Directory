{"ast":null,"code":"import _objectSpread from\"/Users/sandrine/Desktop/Employee_Directoy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/sandrine/Desktop/Employee_Directoy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import DataTable from\"./DataTable\";import Nav from\"./Nav\";import API from\"../utils/API\";import\"../styles/DataArea.css\";import DataAreaContext from\"../utils/DataAreaContext\";var DataArea=function DataArea(){var _useState=useState({users:[],order:\"descend\",filteredUsers:[],headings:[{name:\"Image\",width:\"10%\",order:\"descend\"},{name:\"name\",width:\"10%\",order:\"descend\"},{name:\"phone\",width:\"20%\",order:\"descend\"},{name:\"email\",width:\"20%\",order:\"descend\"},{name:\"dob\",width:\"10%\",order:\"descend\"}]}),_useState2=_slicedToArray(_useState,2),developerState=_useState2[0],setDeveloperState=_useState2[1];var handleSort=function handleSort(heading){var currentOrder=developerState.headings.filter(function(elem){return elem.name===heading;}).map(function(elem){return elem.order;}).toString();if(currentOrder===\"descend\"){currentOrder=\"ascend\";}else{currentOrder=\"descend\";}var compareFnc=function compareFnc(a,b){if(currentOrder===\"ascend\"){// account for missing values\nif(a[heading]===undefined){return 1;}else if(b[heading]===undefined){return-1;}// numerically\nelse if(heading===\"name\"){return a[heading].first.localeCompare(b[heading].first);}else if(heading===\"dob\"){return a[heading].age-b[heading].age;}else{return a[heading].localeCompare(b[heading]);}}else{// account for missing values\nif(a[heading]===undefined){return 1;}else if(b[heading]===undefined){return-1;}// numerically\nelse if(heading===\"name\"){return b[heading].first.localeCompare(a[heading].first);}else if(heading===\"dob\"){return b[heading].age-a[heading].age;}else{return b[heading].localeCompare(a[heading]);}}};var sortedUsers=developerState.filteredUsers.sort(compareFnc);var updatedHeadings=developerState.headings.map(function(elem){elem.order=elem.name===heading?currentOrder:elem.order;return elem;});setDeveloperState(_objectSpread(_objectSpread({},developerState),{},{filteredUsers:sortedUsers,headings:updatedHeadings}));};var handleSearchChange=function handleSearchChange(event){var filter=event.target.value;var filteredList=developerState.users.filter(function(item){var values=item.name.first.toLowerCase()+\" \"+item.name.last.toLowerCase();console.log(filter,values);if(values.indexOf(filter.toLowerCase())!==-1){return item;};});setDeveloperState(_objectSpread(_objectSpread({},developerState),{},{filteredUsers:filteredList}));};useEffect(function(){API.getUsers().then(function(results){console.log(results.data.results);setDeveloperState(_objectSpread(_objectSpread({},developerState),{},{users:results.data.results,filteredUsers:results.data.results}));});},[]);return/*#__PURE__*/React.createElement(DataAreaContext.Provider,{value:{developerState:developerState,handleSearchChange:handleSearchChange,handleSort:handleSort}},/*#__PURE__*/React.createElement(Nav,null),/*#__PURE__*/React.createElement(\"div\",{className:\"data-area\"},developerState.filteredUsers.length>0?/*#__PURE__*/React.createElement(DataTable,null):/*#__PURE__*/React.createElement(\"div\",null)));};export default DataArea;","map":{"version":3,"sources":["/Users/sandrine/Desktop/Employee_Directoy/src/components/DataArea.js"],"names":["React","useState","useEffect","DataTable","Nav","API","DataAreaContext","DataArea","users","order","filteredUsers","headings","name","width","developerState","setDeveloperState","handleSort","heading","currentOrder","filter","elem","map","toString","compareFnc","a","b","undefined","first","localeCompare","age","sortedUsers","sort","updatedHeadings","handleSearchChange","event","target","value","filteredList","item","values","toLowerCase","last","console","log","indexOf","getUsers","then","results","data","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport DataTable from \"./DataTable\";\nimport Nav from \"./Nav\";\nimport API from \"../utils/API\";\nimport \"../styles/DataArea.css\";\nimport DataAreaContext from \"../utils/DataAreaContext\";\n\nconst DataArea = () => {\n  const [developerState, setDeveloperState] = useState({\n    users: [],\n    order: \"descend\",\n    filteredUsers: [],\n    headings: [\n      { name: \"Image\", width: \"10%\", order: \"descend\" },\n      { name: \"name\", width: \"10%\", order: \"descend\" },\n      { name: \"phone\", width: \"20%\", order: \"descend\" },\n      { name: \"email\", width: \"20%\", order: \"descend\" },\n      { name: \"dob\", width: \"10%\", order: \"descend\" }\n    ]\n  });\n\n  const handleSort = heading => {\n    let currentOrder = developerState.headings\n      .filter(elem => elem.name === heading)\n      .map(elem => elem.order)\n      .toString();\n\n    if (currentOrder === \"descend\") {\n      currentOrder = \"ascend\";\n    } else {\n      currentOrder = \"descend\";\n    }\n\n    const compareFnc = (a, b) => {\n      if (currentOrder === \"ascend\") {\n        // account for missing values\n        if (a[heading] === undefined) {\n          return 1;\n        } else if (b[heading] === undefined) {\n          return -1;\n        }\n        // numerically\n        else if (heading === \"name\") {\n          return a[heading].first.localeCompare(b[heading].first);\n        } else if (heading === \"dob\") {\n          return a[heading].age - b[heading].age;\n        } else {\n          return a[heading].localeCompare(b[heading]);\n        }\n      } else {\n        // account for missing values\n        if (a[heading] === undefined) {\n          return 1;\n        } else if (b[heading] === undefined) {\n          return -1;\n        }\n        // numerically\n        else if (heading === \"name\") {\n          return b[heading].first.localeCompare(a[heading].first);\n        }else if (heading === \"dob\") {\n          return b[heading].age - a[heading].age;\n        }  else {\n          return b[heading].localeCompare(a[heading]);\n        }\n      }\n    };\n    const sortedUsers = developerState.filteredUsers.sort(compareFnc);\n    const updatedHeadings = developerState.headings.map(elem => {\n      elem.order = elem.name === heading ? currentOrder : elem.order;\n      return elem;\n    });\n\n    setDeveloperState({\n      ...developerState,\n      filteredUsers: sortedUsers,\n      headings: updatedHeadings\n    });\n  };\n\n  const handleSearchChange = event => {\n    const filter = event.target.value;\n    const filteredList = developerState.users.filter(item => {\n      let values = item.name.first.toLowerCase() + \" \" + item.name.last.toLowerCase();\n      console.log(filter, values)\n    if(values.indexOf(filter.toLowerCase()) !== -1){\n      return item\n    };\n    });\n\n    setDeveloperState({ ...developerState, filteredUsers: filteredList });\n  };\n\n  \n  useEffect(() => {\n    API.getUsers().then(results => {\n      console.log(results.data.results);\n      setDeveloperState({\n        ...developerState,\n        users: results.data.results,\n        filteredUsers: results.data.results\n      });\n    });\n  }, []);\n\n  return (\n    <DataAreaContext.Provider\n      value={{ developerState, handleSearchChange, handleSort }}\n    >\n      <Nav />\n      <div className=\"data-area\">\n        {developerState.filteredUsers.length > 0 ? <DataTable /> : <div></div>}\n      </div>\n    </DataAreaContext.Provider>\n  );\n};\n\nexport default DataArea;\n"]},"metadata":{},"sourceType":"module"}